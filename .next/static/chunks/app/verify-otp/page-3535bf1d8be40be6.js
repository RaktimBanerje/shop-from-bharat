(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{34672:(e,t,r)=>{Promise.resolve().then(r.bind(r,48750))},48750:(e,t,r)=>{"use strict";r.d(t,{default:()=>I});var l=r(20698),a=r(95155),i=r(12115),n=r(43840),s=r.n(n),o=r(65285),c=r(11414),u=r(30107),d=r(32710),h=r(31082),f=r(43463),_=r(69043),g=r(51157),p=r(2611),m=r(12879),y=r(82795),x=r(39617),v=r(26366);let w=(0,r(81045).A)("MuiBox",["root"]),A=(0,x.A)(),O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{themeId:t,defaultTheme:r,defaultClassName:l="MuiBox-root",generateClassName:n}=e,s=(0,_.Ay)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(g.A);return i.forwardRef(function(e,i){let o=(0,m.A)(r),{className:c,component:u="div",...d}=(0,p.A)(e);return(0,a.jsx)(s,{as:u,ref:i,className:(0,f.A)(c,n?n(l):l),theme:t&&o[t]||o,...d})})}({themeId:v.A,defaultTheme:A,defaultClassName:w.root,generateClassName:y.A.generate}),b={TextFieldStyled:(0,d.Ay)(h.A)`
  input {
    text-align: center;
  }
`},j=e=>(0,a.jsx)(b.TextFieldStyled,{...e}),N={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function E(e){let t=i.useRef(()=>{throw Error("Cannot call an event handler while rendering.")});return i.useInsertionEffect(()=>{t.current=e}),i.useCallback((...e)=>t.current?.(...e),[])}let T=()=>!0,V=i.forwardRef((e,t)=>{let{value:r="",length:l=4,autoFocus:n=!1,onChange:s,TextFieldsProps:o,onComplete:c,validateChar:u=T,className:d,onBlur:h,...f}=e,_=i.useRef(r),g=E(c),p=E(e=>{let t=e.slice(0,l);return{isCompleted:t.length===l,finalValue:t}});i.useEffect(()=>{let{isCompleted:e,finalValue:t}=p(_.current);e&&g(t)},[l,g,p]);let m=function(e,t){return e<=0?[]:Array.from({length:e},t)}(l,(e,t)=>({character:r[t]||"",inputRef:i.createRef()})),y=e=>m.findIndex(({inputRef:t})=>t.current===e),x=()=>m.map(({character:e})=>e),v=(e,t)=>x().map((r,l)=>e===l?t:r).join(""),w=e=>{m[e]?.inputRef.current?.focus()},A=e=>{m[e]?.inputRef.current?.select()},b=e=>{e+1!==l&&(m[e+1].character?A(e+1):w(e+1))},V=(e,t)=>"function"!=typeof u||u(e,t),C=e=>{let t=y(e.target);if(0===t&&e.target.value.length>1){let{finalValue:t,isCompleted:r}=p(e.target.value);s?.(t),r&&c?.(t),A(t.length-1);return}let r=e.target.value[0]||"",l=r;l&&!V(l,t)&&(l="");let a=v(t,l);s?.(a);let{isCompleted:i,finalValue:n}=p(a);i&&c?.(n),""!==l?a.length-1<t?A(a.length):b(t):""===r&&a.length<=t&&A(t-1)},R=e=>{let t=e.target,r=t.selectionStart,l=t.selectionEnd,a=y(t);if(t.value===e.key)e.preventDefault(),b(a);else if(N.backspace===e.key){if(t.value){if(0===r&&0===l){e.preventDefault();let t=v(a,"");s?.(t),t.length<=a&&A(a-1)}}else e.preventDefault(),A(a-1)}else N.left===e.key?(e.preventDefault(),A(a-1)):N.right===e.key?(e.preventDefault(),A(a+1)):N.home===e.key?(e.preventDefault(),A(0)):N.end===e.key&&(e.preventDefault(),A(m.length-1))},k=e=>{var t,r;let a=e.clipboardData.getData("text/plain"),i=e.target,n=m.findIndex(({character:e,inputRef:t})=>""===e||t.current===i),o=(t=x(),r=a.split(""),t.reduce((e,t,r)=>{let{characters:l,restArrayMerged:a}=e;if(r<n)return{restArrayMerged:a,characters:[...l,t]};let[i,...s]=a;return{restArrayMerged:s,characters:[...l,i||""]}},{restArrayMerged:r,characters:[]}).characters).map((e,t)=>V(e,t)?e:"").join("");s?.(o);let{isCompleted:u,finalValue:d}=p(o);u?(c?.(d),A(l-1)):A(o.length)},D=e=>{if(!m.some(({inputRef:t})=>t.current===e.relatedTarget)){let{isCompleted:e,finalValue:t}=p(r);h?.(t,e)}};return(0,a.jsx)(O,{display:"flex",gap:"20px",alignItems:"center",ref:t,className:`MuiOtpInput-Box ${d||""}`,...f,children:m.map(({character:e,inputRef:t},r)=>{var l;let{onPaste:i,onFocus:s,onKeyDown:c,className:u,onBlur:d,inputRef:h,...f}="function"==typeof o?o(r)||{}:o||{};return(0,a.jsx)(j,{autoFocus:!!n&&0===r,autoComplete:"one-time-code",value:e,inputRef:(l=[t,h],e=>{l.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}),className:`MuiOtpInput-TextField MuiOtpInput-TextField-${r+1} ${u||""}`,onPaste:e=>{e.preventDefault(),k(e),i?.(e)},onFocus:e=>{e.preventDefault(),e.target.select(),s?.(e)},onChange:C,onKeyDown:e=>{R(e),c?.(e)},onBlur:e=>{d?.(e),D(e)},...f},r)})})});var C=r(5565),R=r(92028),k=r(33694),D=r(30777);function S(){let e=(0,l._)(["\n  display: flex;\n  gap: 30px;\n  max-width: 60%;\n  margin-inline: auto;\n"]);return S=function(){return e},e}let F=(0,o.Ay)(V)(S()),I=()=>{let[e,t]=(0,i.useState)(""),[r,l]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[d,h]=(0,i.useState)(10);(0,i.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("email"),r=e.get("jwtSecret");t&&r?(l(t),o(r)):(c.Ay.error("Missing email or JWT secret."),window.location.href="/")},[]);let f=async()=>{try{let t=await (0,u.A)("POST","api/auth/verify/email/otp",{email:r,otp:e,jwtSecret:n});t.status?(localStorage.setItem("JWT_TOKEN",t.secret),c.Ay.success("OTP verification successful!"),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("email",r),setTimeout(()=>{window.location.href="/address"},2e3)):c.Ay.error(t.message)}catch(e){console.error("Error verifying OTP:",e),c.Ay.error("An error occurred while verifying OTP.")}};return(0,i.useEffect)(()=>{let e=setInterval(()=>{h(t=>t>0?t-1:(clearInterval(e),t))},1e3);return()=>clearInterval(e)},[]),(0,a.jsxs)("div",{className:s().login,children:[(0,a.jsxs)("div",{className:s().login_left,children:[(0,a.jsx)("div",{className:s().login_left_header,children:(0,a.jsx)("h1",{children:"Enter your Details"})}),(0,a.jsxs)("div",{className:s().ellipses,children:[(0,a.jsx)("div",{className:s().ellipses_small,children:(0,a.jsx)(C.default,{src:k.A,alt:"Small Ellipse",width:100,height:100})}),(0,a.jsx)("div",{className:s().ellipses_main,children:(0,a.jsx)(C.default,{src:R.A,alt:"Main Ellipse",width:150,height:150})})]})]}),(0,a.jsx)("div",{className:s().login_right,children:(0,a.jsxs)("div",{className:s().login_form,children:[(0,a.jsx)("div",{className:s().brand_logo,children:(0,a.jsx)(C.default,{src:D.A,alt:"ShopBharat Logo",width:150,height:50})}),(0,a.jsx)("div",{className:s().login_form_heading,children:(0,a.jsx)("h1",{children:"OTP Verification"})}),(0,a.jsx)(F,{value:e,onChange:e=>{t(e)}}),(0,a.jsxs)("div",{className:s().countdown_text,children:[(0,a.jsxs)("p",{children:["Time Remaining:"," ",(0,a.jsx)("span",{style:{fontWeight:600},children:d<10?"0".concat(d):d})]}),(0,a.jsx)("button",{disabled:d>0,style:d>0?{color:"#DFE3E8"}:{color:"#FF5630"},onClick:()=>{h(10),console.log("Resending OTP...")},children:"RESEND OTP"})]}),(0,a.jsx)("div",{className:s().button,children:(0,a.jsx)("button",{onClick:f,children:"CONTINUE"})}),(0,a.jsxs)("div",{className:s().dont_have_account,children:["Want to change your email?"," ",(0,a.jsx)("span",{onClick:()=>window.history.back(),className:s().change_email_option,children:"Click here"})]})]})})]})}},30107:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var l=r(82651);let a="https://13.210.82.75",i=async function(e,t,r){let i=localStorage.getItem("BHARAT_TOKEN");try{let n;if(console.log(a,"BaseUrl value is here"),"GET"===e)n=await (0,l.A)({method:"get",url:"".concat(a,"/").concat(t),headers:{Authorization:"Bearer "+i}});else if("POST"===e)n=await (0,l.A)({method:"post",url:"".concat(a,"/").concat(t),headers:{Authorization:"Bearer "+i},data:r});else if("PUT"===e)n=await (0,l.A)({method:"put",url:"".concat(a,"/").concat(t),headers:{Authorization:"Bearer "+i},data:r});else if("DELETE"===e)n=await (0,l.A)({method:"delete",url:"".concat(a,"/").concat(t),headers:{Authorization:"Bearer "+i},data:r});else throw Error("Unsupported HTTP method");return n.data}catch(e){return e}}},43840:e=>{e.exports={login:"VerifyOtp_login__6iVni",login_left:"VerifyOtp_login_left__OKF5W",login_left_header:"VerifyOtp_login_left_header__rDQDl",login_right:"VerifyOtp_login_right__6dwez",brand_logo:"VerifyOtp_brand_logo__y8PEZ",login_form:"VerifyOtp_login_form__iI4Ne",textField:"VerifyOtp_textField__OCmoo",button:"VerifyOtp_button__XwQ2e",google_button:"VerifyOtp_google_button__eVzlw",line:"VerifyOtp_line__QRH2w",border_left:"VerifyOtp_border_left__f3M4q",border_right:"VerifyOtp_border_right__FlfCx",line_or:"VerifyOtp_line_or__SuwAL",ellipses:"VerifyOtp_ellipses__Gl_vH",ellipses_main:"VerifyOtp_ellipses_main__oNDXk",ellipses_small:"VerifyOtp_ellipses_small__1Wzqb",countdown_text:"VerifyOtp_countdown_text__rbTlP",change_email_option:"VerifyOtp_change_email_option__FRpgw"}},92028:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l={src:"/_next/static/media/EllipseMain.4346e8c3.svg",height:196,width:205,blurWidth:0,blurHeight:0}},33694:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l={src:"/_next/static/media/EllipseSmall.ad6feab9.svg",height:138,width:138,blurWidth:0,blurHeight:0}},30777:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l={src:"/_next/static/media/shopBharat.920a31b6.svg",height:233,width:233,blurWidth:0,blurHeight:0}}},e=>{var t=t=>e(e.s=t);e.O(0,[4871,931,2651,8441,1517,7358],()=>t(34672)),_N_E=e.O()}]);